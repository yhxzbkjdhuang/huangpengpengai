# 黄鹏AI对话工具 - 故障排除指南

## 常见问题及解决方案

### 🎤 语音输入问题

#### 问题1：点击麦克风按钮没有反应
**可能原因：**
- 浏览器麦克风权限被拒绝
- 麦克风设备未连接或损坏
- 浏览器不支持语音输入

**解决方案：**
1. 检查浏览器地址栏是否有麦克风图标，点击允许
2. 在浏览器设置中检查麦克风权限
3. 确认麦克风设备正常工作
4. 尝试刷新页面重新授权

#### 问题2：录音后无法识别语音
**可能原因：**
- 音频质量不佳
- 语音识别服务配置错误
- 网络连接问题

**解决方案：**
1. 在安静环境中重新录音
2. 说话声音清晰，语速适中
3. 检查网络连接
4. 查看控制台错误信息

#### 问题3：语音识别返回500错误
**可能原因：**
- ASR服务配置错误
- API密钥无效
- 音频格式转换失败

**解决方案：**
1. 检查config.py中的科大讯飞API配置
2. 确认API密钥有效且有足够额度
3. 安装FFmpeg改善音频处理
4. 查看服务器日志获取详细错误信息

### 🔊 语音输出问题

#### 问题1：点击播放按钮没有声音
**可能原因：**
- 浏览器音量被静音
- 语音合成服务配置错误
- 音频文件生成失败

**解决方案：**
1. 检查浏览器和系统音量设置
2. 验证TTS服务配置
3. 查看网络控制台错误信息
4. 尝试刷新页面

#### 问题2：语音合成失败
**可能原因：**
- TTS服务配置错误
- API额度不足
- 文本内容包含特殊字符

**解决方案：**
1. 检查科大讯飞TTS配置
2. 确认API账户余额充足
3. 避免使用特殊符号和表情
4. 缩短文本长度

### 💬 对话功能问题

#### 问题1：发送消息无响应
**可能原因：**
- Kimi API配置错误
- 网络连接问题
- 服务器繁忙

**解决方案：**
1. 检查config.py中的Kimi API配置
2. 验证API密钥有效性
3. 检查网络连接
4. 等待片刻后重试

#### 问题2：AI回复内容异常
**可能原因：**
- 角色设定问题
- 输入内容不当
- API服务异常

**解决方案：**
1. 检查HUANG_PENG_PERSONA设定
2. 使用更清晰的问题描述
3. 尝试重新开始对话
4. 检查API服务状态

### 🔧 系统配置问题

#### 问题1：启动时提示配置验证失败
**可能原因：**
- config.py文件缺失或配置错误
- API密钥格式不正确
- 必要的配置项缺失

**解决方案：**
1. 检查config.py文件是否存在
2. 验证所有API密钥格式正确
3. 参考README.md完成配置
4. 确保所有必需配置项都已填写

#### 问题2：模块导入错误
**可能原因：**
- 依赖包未安装
- Python版本不兼容
- 虚拟环境未激活

**解决方案：**
1. 运行 `pip install -r requirements.txt`
2. 确认Python版本≥3.7
3. 激活正确的虚拟环境
4. 检查包版本冲突

### 🌐 网络和部署问题

#### 问题1：无法访问应用
**可能原因：**
- 端口被占用
- 防火墙阻止访问
- 服务启动失败

**解决方案：**
1. 更改config.py中的端口号
2. 检查防火墙设置
3. 查看启动日志错误信息
4. 确认所有依赖已安装

#### 问题2：HTTPS相关问题
**可能原因：**
- 浏览器安全策略
- 证书配置问题
- 混合内容警告

**解决方案：**
1. 使用HTTPS访问（推荐）
2. 在浏览器中允许不安全内容
3. 配置SSL证书
4. 使用localhost进行本地测试

## 调试技巧

### 1. 开启详细日志
在config.py中设置：
```python
DEBUG = True
LOG_LEVEL = 'DEBUG'
```

### 2. 检查浏览器控制台
- 按F12打开开发者工具
- 查看Console标签页的错误信息
- 注意Network标签页的请求状态

### 3. 查看服务器日志
- 启动时的配置验证信息
- API调用的详细日志
- 错误堆栈信息

### 4. 系统状态检查
访问 `http://localhost:5000/test` 查看各组件状态：
- ✅ 绿色：服务正常
- ❌ 红色：服务异常
- ⚠️ 黄色：功能受限

## 性能优化建议

### 1. 音频处理优化
- 安装FFmpeg获得最佳音频处理效果
- 在安静环境中录音
- 使用质量好的麦克风设备

### 2. 网络优化
- 使用稳定的网络连接
- 考虑使用CDN加速静态资源
- 适当调整请求超时时间

### 3. 资源管理
- 定期清理临时音频文件
- 监控API使用额度
- 合理设置对话历史长度

## 获取帮助

如果以上方法都无法解决问题，请：

1. **检查日志文件** - 查看详细错误信息
2. **查看官方文档** - 确认API使用方法
3. **社区支持** - 在相关论坛寻求帮助
4. **技术支持** - 联系API服务提供商

---

*最后更新时间：2024年12月* 